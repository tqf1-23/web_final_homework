{"ast":null,"code":"var _jsxFileName = \"E:\\\\web\\\\web_final_homework\\\\frontend\\\\src\\\\TodoList.js\";\nimport React, { Component, useState, Fragment, useEffect } from 'react';\nimport ListItem from './ListItem';\nimport NewItem from './NewItem';\nimport UpdateItem from './UpdateItem';\nimport { getTodos, addTodo, deleteTodo, updateTodo } from \"./api/TodoApi\";\nimport _ from \"lodash\";\nimport './style.css';\n\nconst TodoList = () => {\n  const [list, setList] = useState(null);\n  const [error, setError] = useState(\"\");\n\n  const handleLoadTasks = () => {\n    getTodos().then(response => {\n      setList(response);\n    }).catch(error => {\n      setError(\"Unable to retrieve todo's\");\n    });\n  };\n\n  const handleAddTask = inputV => {\n    if (inputV === \"\") return;\n    const newTask = {\n      id: _.parseInt(list.length ? list[list.length - 1].id : 0) + 1,\n      content: inputV\n    };\n    addTodo(newTask).then(() => {\n      setList([...list, newTask]);\n    });\n  };\n\n  const handleDeleteTask = id => deleteTodo(id).then(() => {\n    setList(list.filter(item => item.id !== id));\n  });\n\n  const handleUpdateTask = updateV => {\n    if (updateV.content === \"\") return;\n    updateTodo(updateV).then(response => {\n      setList(list.map(x => x.id === response.id ? { ...x,\n        ...response\n      } : x));\n    });\n  };\n  /*useEffect(() => {\r\n    handleLoadTasks();\r\n  }, []);*/\n\n\n  useEffect(() => {\n    setList([{\n      \"id\": 1,\n      \"content\": \"Restful API homework\",\n      \"updatedAt\": \"2020-04-05 00:00:00\"\n    }]);\n  }, []);\n\n  if (list === null) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 12\n      }\n    }, \"Tasks is loading ...\");\n  }\n\n  if (error) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 12\n      }\n    }, error);\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 14\n    }\n  }, list.map(item => /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(ListItem, {\n    item: item,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(UpdateItem, {\n    updateItem: handleUpdateTask,\n    item: item,\n    index: item.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"delete-button\",\n    onClick: handleDeleteTask.bind(this, item.id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 29\n    }\n  }, \"Delete\"))), /*#__PURE__*/React.createElement(NewItem, {\n    addItem: handleAddTask,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 17\n    }\n  }));\n};\n\nexport default TodoList;","map":{"version":3,"sources":["E:/web/web_final_homework/frontend/src/TodoList.js"],"names":["React","Component","useState","Fragment","useEffect","ListItem","NewItem","UpdateItem","getTodos","addTodo","deleteTodo","updateTodo","_","TodoList","list","setList","error","setError","handleLoadTasks","then","response","catch","handleAddTask","inputV","newTask","id","parseInt","length","content","handleDeleteTask","filter","item","handleUpdateTask","updateV","map","x","bind"],"mappings":"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","sourcesContent":["import React, { Component,useState, Fragment, useEffect } from 'react';\r\nimport ListItem from './ListItem';\r\nimport NewItem from './NewItem';\r\nimport UpdateItem from './UpdateItem';\r\nimport { getTodos, addTodo, deleteTodo, updateTodo } from \"./api/TodoApi\";\r\nimport _ from \"lodash\";\r\nimport './style.css';\r\n\r\nconst TodoList = () => {\r\n\r\n  const [list, setList] = useState(null);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  const handleLoadTasks = () => {\r\n    getTodos()\r\n      .then((response) => {\r\n        setList(response);\r\n      })\r\n      .catch((error) => {\r\n        setError(\"Unable to retrieve todo's\");\r\n      });\r\n  };\r\n\r\n  const handleAddTask = (inputV) => {\r\n    if (inputV === \"\") return;\r\n\r\n    const newTask = {\r\n      id: _.parseInt(list.length ? list[list.length - 1].id : 0) + 1,\r\n      content: inputV,\r\n    };\r\n\r\n    addTodo(newTask).then(() => {\r\n      setList([...list, newTask]);\r\n    });\r\n  };\r\n\r\n  const handleDeleteTask = (id) =>\r\n    deleteTodo(id).then(() => {\r\n      setList(list.filter((item) => item.id !== id));\r\n    });\r\n\r\n    const handleUpdateTask = (updateV) => {\r\n      if (updateV.content === \"\") return;\r\n  \r\n      updateTodo(updateV).then((response) => {\r\n        setList(\r\n          list.map((x) => (x.id === response.id ? { ...x, ...response } : x))\r\n        );\r\n      });\r\n    };\r\n  /*useEffect(() => {\r\n    handleLoadTasks();\r\n  }, []);*/\r\n\r\n  useEffect(() => {\r\n    setList([{\"id\":1,\"content\":\"Restful API homework\",\"updatedAt\":\"2020-04-05 00:00:00\"}])\r\n  }, []);\r\n\r\n  if (list === null) {\r\n    return <div>Tasks is loading ...</div>;\r\n  }\r\n\r\n  if (error) {\r\n    return <div>{error}</div>;\r\n  }\r\n\r\n\r\n  return(\r\n             <div>\r\n                {\r\n                    list.map(item=>(\r\n                        <div>\r\n                            <ListItem item={item}/>\r\n                            <UpdateItem \r\n                            updateItem={handleUpdateTask}\r\n                            item={item} \r\n                            index={item.id}\r\n                            />\r\n                            <button className=\"delete-button\" onClick={handleDeleteTask.bind(this,item.id)}>Delete</button>\r\n                        </div>\r\n                    ))\r\n                }\r\n                <NewItem addItem={handleAddTask}/>\r\n            </div>\r\n        );\r\n}\r\n\r\nexport default TodoList;"]},"metadata":{},"sourceType":"module"}