{"ast":null,"code":"var _jsxFileName = \"F:\\\\JavaProject\\\\backend\\\\frontend\\\\src\\\\TodoList.js\";\nimport React, { useState, useEffect } from 'react';\nimport ListItem from './ListItem';\nimport NewItem from './NewItem';\nimport { getTodos, addTodo, deleteTodo, updateTodo } from \"./api/TodoApi\";\nimport _ from \"lodash\";\nimport './style.css';\n\nconst TodoList = () => {\n  const [list, setList] = useState(null);\n  const [error, setError] = useState(\"\");\n\n  const handleLoadTasks = () => {\n    getTodos().then(response => {\n      setList(response);\n    }).catch(error => {\n      setError(\"Unable to retrieve todo's\");\n    });\n  };\n\n  const handleAddTask = inputV => {\n    if (inputV === \"\") return;\n    const newTask = {\n      id: _.parseInt(list.length ? list[list.length - 1].id : 0) + 1,\n      content: inputV\n    };\n    addTodo(newTask).then(() => {\n      setList([...list, newTask]);\n    });\n  };\n\n  const handleDeleteTask = id => deleteTodo(id).then(() => {\n    setList(list.filter(item => item.id !== id));\n  });\n\n  const handleUpdateTask = updateV => {\n    if (updateV.content === \"\") return;\n    updateTodo(updateV).then(response => {\n      setList(list.map(x => x.id === response.id ? { ...x,\n        ...response\n      } : x));\n    });\n  };\n\n  useEffect(() => {\n    handleLoadTasks();\n  }, []);\n  /*useEffect(() => {\r\n    setList([{\"id\":1,\"content\":\"Restful API homework\",\"updatedAt\":\"2020-04-05 00:00:00\"}])\r\n  }, []);*/\n\n  if (list === null) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"back-load\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 12\n      }\n    }, \"\\u7B49\\u5F85\\u6570\\u636E\\u4E0B\\u8F7D\");\n  }\n\n  if (error) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"back-error\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 12\n      }\n    }, error);\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: \"todoList\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 10\n    }\n  }, list.map(item => /*#__PURE__*/React.createElement(ListItem, {\n    updateItem: handleUpdateTask,\n    item: item,\n    index: item.id,\n    deleteItem: handleDeleteTask,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 20\n    }\n  })), /*#__PURE__*/React.createElement(NewItem, {\n    addItem: handleAddTask,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }\n  }));\n};\n\nexport default TodoList;","map":{"version":3,"sources":["F:/JavaProject/backend/frontend/src/TodoList.js"],"names":["React","useState","useEffect","ListItem","NewItem","getTodos","addTodo","deleteTodo","updateTodo","_","TodoList","list","setList","error","setError","handleLoadTasks","then","response","catch","handleAddTask","inputV","newTask","id","parseInt","length","content","handleDeleteTask","filter","item","handleUpdateTask","updateV","map","x"],"mappings":"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","sourcesContent":["import React, {useState, useEffect } from 'react';\r\nimport ListItem from './ListItem';\r\nimport NewItem from './NewItem';\r\nimport { getTodos, addTodo, deleteTodo, updateTodo } from \"./api/TodoApi\";\r\nimport _ from \"lodash\";\r\nimport './style.css';\r\n\r\nconst TodoList = () => {\r\n\r\n  const [list, setList] = useState(null);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  const handleLoadTasks = () => {\r\n    getTodos()\r\n      .then((response) => {\r\n        setList(response);\r\n      })\r\n      .catch((error) => {\r\n        setError(\"Unable to retrieve todo's\");\r\n      });\r\n  };\r\n\r\n  const handleAddTask = (inputV) => {\r\n    if (inputV === \"\") return;\r\n\r\n    const newTask = {\r\n      id: _.parseInt(list.length ? list[list.length - 1].id : 0) + 1,\r\n      content: inputV,\r\n    };\r\n\r\n    addTodo(newTask).then(() => {\r\n      setList([...list, newTask]);\r\n    });\r\n  };\r\n\r\n  const handleDeleteTask = (id) =>\r\n    deleteTodo(id).then(() => {\r\n      setList(list.filter((item) => item.id !== id));\r\n    });\r\n\r\n  const handleUpdateTask = (updateV) => {\r\n      if (updateV.content === \"\") return;\r\n  \r\n      updateTodo(updateV).then((response) => {\r\n        setList(\r\n          list.map((x) => (x.id === response.id ? { ...x, ...response } : x))\r\n        );\r\n      });\r\n    };\r\n  useEffect(() => {\r\n    handleLoadTasks();\r\n  }, []);\r\n\r\n  /*useEffect(() => {\r\n    setList([{\"id\":1,\"content\":\"Restful API homework\",\"updatedAt\":\"2020-04-05 00:00:00\"}])\r\n  }, []);*/\r\n\r\n  if (list === null) {\r\n    return <div className=\"back-load\">等待数据下载</div>;\r\n  }\r\n\r\n  if (error) {\r\n    return <div className=\"back-error\">{error}</div>;\r\n  }\r\n\r\n\r\n  return(\r\n         <div id='todoList'>\r\n           {\r\n              list.map(item=>(\r\n                   <ListItem \r\n                     updateItem={handleUpdateTask}\r\n                     item={item} \r\n                     index={item.id}\r\n                     deleteItem={handleDeleteTask}\r\n                    />\r\n              ))\r\n            }\r\n            <NewItem addItem={handleAddTask}/>\r\n         </div>\r\n        );\r\n}\r\n\r\nexport default TodoList;"]},"metadata":{},"sourceType":"module"}